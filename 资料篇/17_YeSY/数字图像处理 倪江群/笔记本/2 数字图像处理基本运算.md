# 数字图像处理基本运算

 Author： 中山大学 17数据科学与计算机学院 YSY

 https://github.com/ysyisyourbrother  

[toc]



## 图像的像素运算

### 点运算

<img src="assets/image-20200102155615317.png" alt="image-20200102155615317" style="zoom:67%;" />

<img src="assets/image-20200102155622823.png" alt="image-20200102155622823" style="zoom:50%;" />

输入的I是HSI模型中的亮度

a>1的时候相当于原本的亮度差值越来越大，也就是对比度上升了

点运算就是

1.  算针对图像中的每一个像素灰度，独立地进行灰 度值的改变 
2.  输出图像中每个像素点的灰度值，仅取决于相应输入 像素点的值  
3.  点运算不改变图像内的空间关系 

可以增强对比度，拉伸对比度，进行灰度变换



### 代数运算

<img src="assets/image-20200102160210016.png" alt="image-20200102160210016" style="zoom:50%;" />

去除叠加性噪声，对叠加的噪音图像求均值。

<img src="assets/image-20200102160303538.png" alt="image-20200102160303538" style="zoom:67%;" />

二次曝光

<img src="assets/image-20200102160355378.png" alt="image-20200102160355378" style="zoom:67%;" />

乘法的定义是：逐点相乘





### 逻辑运算

#### 求反

 g(x,y) = R - f(x,y) R为f(x, y)的灰度级，对于8bit灰度图，R=255。 



#### 异或

<img src="assets/image-20200102160937534.png" alt="image-20200102160937534" style="zoom:67%;" />

#### 与

<img src="assets/image-20200102161003287.png" alt="image-20200102161003287" style="zoom:67%;" />

![image-20200102161121532](assets/image-20200102161121532.png)





## 非几何变换

### 对数变换

![image-20200102175657639](assets/image-20200102175657639.png)

![image-20200102180709327](assets/image-20200102180709327.png)

对于对数变换：将输入中范围较窄的低灰度值映射为范围较宽的灰度值。用这种方法拓展低灰度值，同时压缩更高灰度的值。**对于大部分都是低灰度值的图像来说，起到对比度拉升的作用**

### gamma变换

![image-20200102181317398](assets/image-20200102181317398.png)

![image-20200102181326620](assets/image-20200102181326620.png)

![image-20200102181650070](assets/image-20200102181650070.png)

![image-20200102181729978](assets/image-20200102181729978.png)



### 图像求反

![image-20200102182005986](assets/image-20200102182005986.png)



### 分段线性变换

#### **对比度拉伸**

![image-20200102182300531](assets/image-20200102182300531.png)

#### 灰度级分层

![image-20200102182311082](assets/image-20200102182311082.png)

![image-20200102182736005](assets/image-20200102182736005.png)

相当于构建了一条映射的直线，过(2,0)(7,9)点

或者用minmax公式也可以构建

## 几何变换

不改变灰度值，但会改变坐标的位置

1. 坐标空间变换
2. 灰度内插，对变换后的像素灰度赋值

### 顺时针旋转

![image-20200102161959687](assets/image-20200102161959687.png)

![image-20200102162007864](assets/image-20200102162007864.png)

![image-20200102162153422](assets/image-20200102162153422.png)

### 仿射变换affine

一般形式

<img src="assets/image-20200102165633895.png" alt="image-20200102165633895" style="zoom:67%;" />

![image-20200102165845037](assets/image-20200102165845037.png)

一般具有性质：

- 变换前图形上的每一点，在变换后的图形上都有一确定的对应 点，如原来直线上的中点变换为新直线的中点 
- 平行直线变换后仍保持平行，相交直线变换后仍相交 
- 变换前直线上的线段比等于变换后对应的线段比 

##### 一些变换矩阵的实例

平移：

![image-20200102165949404](assets/image-20200102165949404.png)

对称

<img src="assets/image-20200102165959617.png" alt="image-20200102165959617" style="zoom: 67%;" />

垂直镜像：

<img src="assets/image-20200102170025036.png" alt="image-20200102170025036" style="zoom:67%;" />

缩放
![image-20200102170048432](assets/image-20200102170048432.png)

旋转

<img src="assets/image-20200102170127510.png" alt="image-20200102170127510" style="zoom:67%;" />

<img src="assets/image-20200102170221099.png" alt="image-20200102170221099" style="zoom:67%;" />

错切变换

![image-20200102170341554](assets/image-20200102170341554.png)

![image-20200102170345533](assets/image-20200102170345533.png)

### 映射 projective

#### 非线性集合变换

![image-20200102170556793](assets/image-20200102170556793.png)

![image-20200102162636445](assets/image-20200102162636445.png)

### 插值

前向映射后可能输出网格上有些点没有被映射，用插值的方法填补

![image-20200102164952239](assets/image-20200102164952239.png)

![image-20200102165006441](assets/image-20200102165006441.png)

如果有些输出网格点附近没有映射过来的像素，就会形成空洞

![image-20200102165057990](assets/image-20200102165057990.png)

可以用向后映射来计算变换后输出网格点的值。对输出网格点做向后映射，映射完后在原图像插值，然后作为变换后对应网格点的值

![image-20200102170809863](assets/image-20200102170809863.png)

### 

#### 最近邻：

![image-20191229121806761](assets/image-20191229121806761.png)



#### 双线性：

用当前点周围的最近的四个点来一起估计它的值，用距离加权求和的方法：

![image-20191229121526582](assets/image-20191229121526582.png)

 ![image-20191229150611470](assets/image-20191229150611470.png)![img](assets/1344541-20190320150349425-1843375380.png) 

 双线性内插法的计算比最邻近点法复杂，计算量较大但没有灰度不连续的缺点，结果基本[令人满意](https://www.baidu.com/s?wd=令人满意&tn=24004469_oem_dg&rsv_dl=gh_pl_sl_csd)。它具有低通滤波性质，使高频分量受损，图像轮廓可能会有一点模糊。 

![image-20200102171157988](assets/image-20200102171157988.png)

##### 双三次：

![image-20200102171308665](assets/image-20200102171308665.png)

![image-20191229122548679](assets/image-20191229122548679.png)

 ![img](assets/1344541-20190320151527029-476163158.png)

  对待插值的像素点(x,y)（x和y可以为浮点数），取其附近的4x4邻域点(xi,yj), i,j = 0,1,2,3。按如下公式进行插值计算： 

![img](https://img2018.cnblogs.com/blog/1344541/201903/1344541-20190320151711921-620585732.png)  

**其实就相当于一个卷积的操作**

![image-20191229122639638](assets/image-20191229122639638.png)
$$
Sinc(x)=\frac{sin(\pi x)}{\pi x}
$$
我们在还原信号的时候，只需要在频谱上做一个低通滤波，把那些延展出来的频率过滤掉，得到的就是原始的信号 

 而根据傅立叶变换的性质，在频域上乘积，等价于在时域上的卷积。而低通滤波器，可以近似看为一个矩形函数。矩形函数的傅立叶变换（或者逆变换），则是Sinc函数 

![img](assets/v2-2668cc0b028a09b7b4959a13a1525019_hd.jpg)  所以，低通滤波的操作，又相当于把采样点和Sinc函数进行了卷积。 



#### 不同插值方法的使用场景：

1.  当纹理信息为主要信息时，最近邻采样将严重 改变原图像的纹理信息 
2.  但灰度信息为主要信息时，双线性内插及三次 卷积内插将减少图像异质性，增加图像同质 性，其中，双线性内插方法使这种变化更为明 显 







